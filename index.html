<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åˆæ­¡å±±å»£æ’­é›»å° FM90.1</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            background-color: #ffffff;
            font-family: "Microsoft JhengHei", sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
        }
        .main-content {
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 100%;
        }
        .logo-img {
            max-width: 280px;
            height: auto;
            margin-bottom: 20px;
        }
        .station-info {
            font-size: 28px;
            font-weight: bold;
            color: #333;
            margin-bottom: 10px;
        }
        .player-controls {
            display: flex;
            gap: 20px;
            margin-bottom: 10px;
        }
        .btn {
            border: none;
            padding: 10px 35px;
            font-size: 20px;
            border-radius: 25px;
            cursor: pointer;
            color: white;
            font-weight: bold;
            display: flex;
            align-items: center;
            justify-content: center;
            min-width: 120px;
        }
        .play-btn { background-color: #5cb85c; }
        .stop-btn { background-color: #f05f5f; }
        .icon { margin-right: 8px; }
        .viewer-stats {
            font-size: 18px;
            font-weight: bold;
            color: #00008B;
            margin-bottom: 30px;
        }
    </style>
</head>
<body>

<div class="main-content">
    <img src="èƒŒæ™¯åœ–.png" alt="Logo" class="logo-img">
    <div class="station-info">åˆæ­¡å±±å»£æ’­é›»å° FM90.1</div>

    <div class="player-controls">
        <button class="btn play-btn" onclick="playRadio()">
            <span class="icon">â–¶</span> æ’­æ”¾
        </button>
        <button class="btn stop-btn" onclick="stopRadio()">
            <span class="icon">â– </span> åœæ­¢
        </button>
    </div>

    <div class="viewer-stats">
        ç·šä¸Šæ”¶è½äººæ•¸å…± <span id="count-number">è®€å–ä¸­...</span> äºº
    </div>
</div>

<audio id="radio" src="/live" preload="none"></audio>

<script>
var audio = document.getElementById('radio');
var countElement = document.getElementById('count-number');

function playRadio() {
    audio.play().catch(e => console.log("æ’­æ”¾å¤±æ•—:", e));
}

function stopRadio() {
    audio.pause();
}

// â­ è®€å– Icecast çœŸå¯¦æ”¶è½äººæ•¸
function updateListeners() {
    fetch('/status-json.xsl?nocache=' + new Date().getTime())
    .then(response => response.json())
    .then(data => {
        let sources = data.icestats.source;
        let listeners = 0;

        if (Array.isArray(sources)) {
            sources.forEach(src => {
                if (src.listenurl && src.listenurl.includes('/live')) {
                    listeners = src.listeners;
                }
            });
        } else {
            if (sources.listenurl && sources.listenurl.includes('/live')) {
                listeners = sources.listeners;
            }
        }

        countElement.innerText = listeners;
    })
    .catch(err => {
        console.log("è®€å–äººæ•¸å¤±æ•—", err);
        countElement.innerText = "0";
    });
}

// ğŸš€ æ¯ 5 ç§’æ›´æ–°ä¸€æ¬¡
updateListeners();
setInterval(updateListeners, 5000);
</script>

</body>
</html>










